<nav>
    <div class="logo-container">
        <a href="/" class="logo-link">
            <img src="/logo-nobackground.jpg" alt="Abundant Science logo" />
            <strong>Abundant Science</strong>
        </a>
    </div>

    <!-- Desktop nav (always visible on large screens) -->
    <div class="nav-links desktop-nav">
        <a href="/abundl">Abundl</a>
        <a href="https://rapidte.st/">Shop</a>
        <a href="/blog/">Blog</a>
        <a href="/about">About</a>
        <a href="mailto:contact@abundant.science">Contact</a>
    </div>

    <!-- Mobile hamburger menu -->
    <div class="menu-wrapper" id="mobile-menu-wrapper">
        <div class="hamburger" id="hamburger-button">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="nav-links" id="mobile-nav-links">
            <a href="/abundl">Abundl</a>
            <a href="https://rapidte.st/">Shop</a>
            <a href="/blog/">Blog</a>
            <a href="/about">About</a>
            <a href="mailto:contact@abundant.science">Contact</a>
        </div>
    </div>
</nav>

<script>
(function() {
    // Wait for the navbar to be fully loaded
    function initializeNavbar() {
        const hamburger = document.getElementById('hamburger-button');
        const mobileNav = document.getElementById('mobile-nav-links');
        const menuWrapper = document.getElementById('mobile-menu-wrapper');
        
        if (!hamburger || !mobileNav || !menuWrapper) {
            // If elements aren't ready yet, try again in a few milliseconds
            setTimeout(initializeNavbar, 50);
            return;
        }

        let isMenuOpen = false;

        // Toggle menu on hamburger click
        hamburger.addEventListener('click', function(e) {
            e.stopPropagation();
            e.preventDefault();
            
            isMenuOpen = !isMenuOpen;
            
            if (isMenuOpen) {
                mobileNav.style.display = 'flex';
                menuWrapper.classList.add('menu-open');
                hamburger.classList.add('open');
            } else {
                mobileNav.style.display = 'none';
                menuWrapper.classList.remove('menu-open');
                hamburger.classList.remove('open');
            }
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            if (!menuWrapper.contains(e.target) && isMenuOpen) {
                isMenuOpen = false;
                mobileNav.style.display = 'none';
                menuWrapper.classList.remove('menu-open');
                hamburger.classList.remove('open');
            }
        });

        // Close menu when clicking on a nav link
        const navLinks = mobileNav.querySelectorAll('a');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                isMenuOpen = false;
                mobileNav.style.display = 'none';
                menuWrapper.classList.remove('menu-open');
                hamburger.classList.remove('open');
            });
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                // Reset mobile menu state on desktop
                isMenuOpen = false;
                mobileNav.style.display = '';
                menuWrapper.classList.remove('menu-open');
                hamburger.classList.remove('open');
            }
        });
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeNavbar);
    } else {
        initializeNavbar();
    }
})();
</script>
